<section
	class="contextual-risk-container"
	role="region"
	aria-labelledby="risk-table-heading"
	(keydown)="onKeyDown($event)"
>
	<header class="contextual-risk-table-header">
		<h3 id="risk-table-heading" class="contextual-risk-table-header-item">Asset</h3>
		<h3 class="contextual-risk-table-header-item">Contextual Risk</h3>
	</header>
	<ul class="asset-list" role="list">
		@for (asset of paginatedAssets; track asset.id) {
			<li class="asset-item" role="listitem">
				<div class="asset-icon">
					<img
						[src]="'icons/' + asset.icon + '.svg'"
						[alt]="asset.name + ' icon'"
						aria-hidden="true"
					/>
				</div>
				<div class="asset-info">
					<h4 class="asset-name" id="asset-name-{{ asset.id }}">{{ asset.name }}</h4>
					<address class="asset-ip">{{ asset.ipAddress }}</address>
				</div>
				<div class="asset-risk">
					<span
						class="risk-badge"
						[ngClass]="asset.riskLevel.toLowerCase()"
						role="status"
						[attr.aria-label]="'Risk level: ' + asset.riskLevel"
					>
						{{ asset.riskLevel }}
					</span>
				</div>
			</li>
		}
	</ul>

	@if (assets.length > pageSize) {
		<nav class="pagination" aria-label="Asset list pagination">
			<div class="pagination-controls">
				<button
					class="pagination-btn"
					[disabled]="currentPage === 1"
					(click)="onPageChange(currentPage - 1)"
					aria-label="Go to previous page"
				>
					<span class="arrow-left" aria-hidden="true">
						<svg
							width="16"
							height="16"
							viewBox="0 0 16 16"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								d="M10.6667 12L6.33333 8L10.6667 4"
								stroke="#808080"
								stroke-width="1.5"
								stroke-linecap="round"
								stroke-linejoin="round"
							/>
						</svg>
					</span>
				</button>
				<p class="pagination-info" aria-live="polite">{{ pageInfo }}</p>
				<button
					class="pagination-btn"
					[disabled]="currentPage === totalPages"
					(click)="onPageChange(currentPage + 1)"
					aria-label="Go to next page"
				>
					<span class="arrow-right" aria-hidden="true">
						<svg
							width="16"
							height="16"
							viewBox="0 0 16 16"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								d="M5.33333 4L9.66667 8L5.33333 12"
								stroke="#808080"
								stroke-width="1.5"
								stroke-linecap="round"
								stroke-linejoin="round"
							/>
						</svg>
					</span>
				</button>
			</div>
		</nav>
	}
</section>
